# ASP.NET Core
# Build and test ASP.NET Core projects targeting .NET Core.
# Add steps that run tests, create a NuGet package, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/dotnet-core

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

variables:
  buildConfiguration: 'Release'

steps:
- task: AzurePowerShell@4
  inputs:
    ScriptType: 'InlineScript'
    Inline: |
      $url = 'https://objectivec2swift.com/#/converter/'
      $req = [system.Net.WebRequest]::Create($url)
      try {
          
          $res = Invoke-WebRequest -Uri $url
          if($res.StatusCode -eq 200)
          {
              Write-Host "$url is alive"
          }
          else
          {
              Write-Host "Wrong Status Code: " $res.StatusCode
              Write-Host $res
              exit 1;
          }
      } 
      catch [System.Exception] {
          $res = $_.Exception
          Write-Host $res;
          exit 1;
      }